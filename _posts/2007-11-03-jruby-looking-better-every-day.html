---
layout: post
title: Permanent Link to JRuby trunk == better/faster Rails performance
author: aaron
---
      
					<p>So I remember a couple months ago playing with JRuby, and while fibonacci was super fast, Rails was way off..  ActiveRecord performance 6x-10x slower than MRI… </p>
<p>Looks like its getting better. Disclaimer: These are really really simple non-scientific tests.</p>
<p>Local mysql database, MYISAM, table people, with 2 columns, (id, name). 100k rows</p>
<div class="CodeRay">
<div class="code">
<pre>&gt; jruby -<span style="color:#036; font-weight:bold">J</span>-server -<span style="color:#036; font-weight:bold">O</span> script/console production
&gt;&gt; <span style="color:#036; font-weight:bold">Benchmark</span>.measure {<span style="color:#00D; font-weight:bold">10000</span>.times {<span style="color:#036; font-weight:bold">Person</span>.find <span style="color:#A60">:first</span>}}.total
=&gt; <span style="color:#60E; font-weight:bold">2.286</span></pre>
</div>
</div>
<div class="CodeRay">
<div class="code">
<pre>&gt; ./script/console production
&gt;&gt;  <span style="color:#036; font-weight:bold">Benchmark</span>.measure {<span style="color:#00D; font-weight:bold">10000</span>.times {<span style="color:#036; font-weight:bold">Person</span>.find <span style="color:#A60">:first</span>}}.total
=&gt; <span style="color:#60E; font-weight:bold">1.7</span></pre>
</div>
</div>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#036; font-weight:bold">Mongrel</span>
&gt; ab -n <span style="color:#00D; font-weight:bold">1000</span> http<span style="color:#A60">:/</span>/localhost:<span style="color:#00D; font-weight:bold">3001</span>/people/<span style="color:#00D; font-weight:bold">1</span>
<span style="color:#036; font-weight:bold">Requests</span> per second:    <span style="color:#60E; font-weight:bold">95.02</span> [<span style="color:#888">#/sec] (mean)</span></pre>
</div>
</div>
<p>On Glassfish v3 with:  RAILS_ENV=production jruby -J-server -O -S glassfish_rails glass2, after a bit of warmup.</p>
<div class="CodeRay">
<div class="code">
<pre>&gt; ab -n <span style="color:#00D; font-weight:bold">1000</span> http<span style="color:#A60">:/</span>/localhost:<span style="color:#00D; font-weight:bold">8080</span>/glass2/people/<span style="color:#00D; font-weight:bold">1</span>
<span style="color:#036; font-weight:bold">Requests</span> per second:    <span style="color:#60E; font-weight:bold">48.25</span> [<span style="color:#888">#/sec] (mean)</span></pre>
</div>
</div>
<p>turning logging mostly off</p>
<div class="CodeRay">
<div class="code">
<pre>&gt; ab -n <span style="color:#00D; font-weight:bold">1000</span> http<span style="color:#A60">:/</span>/localhost:<span style="color:#00D; font-weight:bold">8080</span>/glass2/people/<span style="color:#00D; font-weight:bold">1</span>
<span style="color:#036; font-weight:bold">Requests</span> per second:    <span style="color:#60E; font-weight:bold">56.70</span> [<span style="color:#888">#/sec] (mean)</span></pre>
</div>
</div>
<p>All in all, thats impressive.  Congrats to Charles, Ola, and the whole JRuby crew.  I dont think i’ll be putting this in production yet, but I’m very interested to hear from others that have.</p>
				