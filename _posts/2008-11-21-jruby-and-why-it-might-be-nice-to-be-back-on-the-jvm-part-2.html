---
layout: post
title: Permanent Link to JRuby and why it might be nice to be back on the JVM – Part 2
author: aaron
---
      
					<p>In the previous post, I did some <a href="http://blog.hungrymachine.com/2008/11/19/jruby-and-why-it-might-be-nice-to-be-back-on-the-jvm">JRuby testing</a> and noticed perf improvements over time.</p>
<p><a href="http://www.workingwithrails.com/person/6010-mark-imbriaco">Mark Imbriaco</a>, of 37Signals, asked how it compared to MRI. I was curious too.</p>
<p>I can’t promise a “clean” comparison, your mileage may vary, but… MRI was:</p>
<pre>
Completed in 552ms (View: 104, DB: 14) | 200 OK [http://someurl.com/people/3]
Completed in 345ms (View: 60, DB: <img src="http://blog.hungrymachine.com/wp-includes/images/smilies/icon_cool.gif" alt="8)" class="wp-smiley"> | 200 OK [http://someurl.com/people/3]
Completed in 346ms (View: 60, DB: 4) | 200 OK [http://someurl.com/people/3]
Completed in 347ms (View: 56, DB: 4) | 200 OK [http://someurl.com/people/3]
Completed in 349ms (View: 58, DB: 5) | 200 OK [http://someurl.com/people/3]
</pre>
<p>Some stats on my runtime</p>
<pre>
$ java -version
java version "1.5.0_16"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_16-b06-284)
Java HotSpot(TM) Client VM (build 1.5.0_16-133, mixed mode, sharing)
$ ruby -v
ruby 1.8.6 (2008-08-11 patchlevel 287) [i686-darwin9.5.0]
</pre>
<p>Both ran on a MacBook 2.53GHz.  Likely the perf is better on Java6?</p>
<p>Installed <a href="http://support.apple.com/downloads/Java_for_Mac_OS_X_10_5_Update_1">Java6</a> and re-ran. Similar but better results.</p>
<pre>
Completed in 8815ms (View: 1632, DB: 429) | 200 OK [http://someurl.com/people/3]
Completed in 1017ms (View: 656, DB: 25) | 200 OK [http://someurl.com/people/3]
Completed in 998ms (View: 618, DB: 18) | 200 OK [http://someurl.com/people/3]
Completed in 1300ms (View: 437, DB: 35) | 200 OK [http://someurl.com/people/3]
Completed in 315ms (View: 119, DB: 21) | 200 OK [http://someurl.com/people/3]
Completed in 361ms (View: 140, DB: 20) | 200 OK [http://someurl.com/people/3]
</pre>
<p>Wow! Thats damn close to MRI…eventually… JRuby warmup time sucks though. Maybe warm it up during deploy before putting it back into the load balancer?  Not exactly sure how to warm it correctly though.  </p>
<p>If you just hit a URL on your app, you’ll only warm up THAT execution path… and you cant hit all actions, so…. thoughts?</p>
				