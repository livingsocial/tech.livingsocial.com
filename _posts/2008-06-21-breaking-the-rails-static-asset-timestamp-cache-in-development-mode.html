---
layout: post
title: Permanent Link to Breaking the Rails static asset timestamp cache in development mode
author: warren
---
      
					<p>Rails automatically adds the File.mtime to static assets when using stylesheet_link_tag and javascript_include_tag.  The file’s mtime is cached to prevent excessive file system access… even in development mode.  This is problematic in a Facebook canvas during development mode because often you won’t immediately see the changes you make to your stylesheets and javascripts.</p>
<p>Here is a monkey patch you can throw into a config/initializers/break_asset_cache_in_dev_mode.rb to fix this:</p>
<div class="CodeRay">
<div class="code">
<pre><span style="color:#080; font-weight:bold">if</span> <span style="color:#036; font-weight:bold">RAILS_ENV</span> == <span style="background-color:#fff0f0"><span style="color:#710">'</span><span style="color:#D20">development</span><span style="color:#710">'</span></span>
  require <span style="background-color:#fff0f0"><span style="color:#710">'</span><span style="color:#D20">action_controller/dispatcher</span><span style="color:#710">'</span></span>
  <span style="color:#036; font-weight:bold">ActionController</span>::<span style="color:#036; font-weight:bold">Dispatcher</span>.before_dispatch <span style="color:#080; font-weight:bold">do</span>
    <span style="color:#036; font-weight:bold">ActionView</span>::<span style="color:#036; font-weight:bold">Base</span>.computed_public_paths.clear
  <span style="color:#080; font-weight:bold">end</span>
<span style="color:#080; font-weight:bold">end</span></pre>
</div>
</div>
				